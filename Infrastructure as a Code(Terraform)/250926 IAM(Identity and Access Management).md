### IAM(Identity and Access Management)

- IAM(Identity and Access Management)은 AWS 클라우드에서 리소스에 대한 접근 권한을 안전하게 관리할 수 있는 서비스.
- 인증(Authentication)과 권한 부여(Authorization)를 통해 누가 어떤 리소스에 접근 가능한지 제어.

---
### IAM의 필요성

- **보안 강화**: 루트(Root) 계정 하나로 모든 사람이 접속하면 보안에 취약해진다. 실수로 중요한 리소스를 삭제하거나, 무단으로 민감한 데이터에 접근할 위험이 있다. IAM을 사용하면 각 사용자에게 필요한 최소한의 권한만 부여하여 보안을 강화할 수 있다.
- **책임 소재 명확화**: 어떤 문제가 발생했을 때, 누가 어떤 작업을 했는지 명확하게 추적할 수 있다. 각 사용자의 활동 기록이 남기 때문에 책임 소재를 분명히 할 수 있다.
- **효율적인 관리**: 여러 사용자를 그룹으로 묶고, 그룹에 권한을 할당하면 관리가 훨씬 용이해진다. 새로운 사용자가 팀에 합류하거나 떠날 때, 그룹 단위로 권한을 쉽게 추가하거나 제거할 수 있다.

---
### IAM의 핵심 구성 요소

- **사용자(User)**  
  - AWS에 접근할 수 있는 개별 계정.
  - 각 사용자는 고유한 로그인 자격 증명(비밀번호 또는 액세스 키)을 가짐.
  - 콘솔 로그인, CLI, SDK 등 다양한 방식으로 접근 가능.
    - **사용자 생성**: AWS 콘솔 또는 Terraform을 통해 사용자를 생성 가능. 초기에는 어떤 권한도 부여하지 않고 생성한 다음, 필요한 정책을 연결하는 것이 일반적.


- **그룹(Group)**  
  - 여러 사용자를 묶어 동일한 권한을 부여.
  - 한 사용자가 여러 그룹에 소속될 수 있음.
  - 그룹 안에는 오직 사용자만 포함 가능. (그룹 내 그룹은 불가능)  
    - **그룹 활용**: 예를 들어, Dev-Team 그룹을 생성하고 이 그룹에 S3 버킷 읽기, EC2 인스턴스 시작/중지 권한을 부여하면, 이 그룹에 속한 모든 사용자는 별도로 권한을 설정할 필요 없이 해당 작업을 수행할 수 있다.

- **정책(Policy)**  
  - AWS 리소스에 대한 접근 권한(누가 어떤 리소스에 어떤 작업을 할 수 있는가)을 정의.
  - JSON 문서 형태로 작성된 권한 규칙.
  - 최소 권한 원칙: 보안의 핵심 원칙인 최소 권한의 원칙(Principle of Least Privilege)을 따른다. 사용자에게 작업을 수행하는 데 필요한 최소한의 권한만 부여하는 것을 의미.
  - IAM 권한의 기본 동작:
    - 모든 요청은 기본적으로 **거부(Deny)**.
    - 정책에서 명시적으로 허용(Allow)된 경우만 접근 가능.
    - 명시적 거부(Explicit Deny)는 어떤 허용보다 우선 적용.

- **역할(Role)**  
  - 특정 권한이 부여된 임시 자격 증명.
  - AWS 서비스, 사용자, 애플리케이션이 필요한 권한을 위임받아 사용할 수 있음.
  - 사용자에게 직접 액세스 키를 부여하는 것보다 훨씬 안전.
  - 예시:  
    - EC2 인스턴스에서 실행 중인 애플리케이션이 S3 버킷에 접근해야 하는 경우. 
      1. S3 접근 권한을 정의한 정책 작성.
      2. 해당 정책을 역할에 연결.
      3. EC2 인스턴스가 해당 역할을 수임(Assume)하도록 설정.

---
### Terraform과 IAM

- Terraform을 사용하면 IAM 사용자, 그룹, 정책, 역할을 코드로 관리 가능.
- IAM 설정의 일관성을 유지하고, 변경 사항을 버전 관리하며, 자동화된 배포 파이프라인에 통합하는 데 유용.
- **변수 사용**: 사용자 이름이나 그룹 이름 등을 하드코딩하지 않고 variables.tf 파일에 정의하여 관리.
- **모듈화**: 복잡한 IAM 설정을 모듈로 만들어 재사용성을 높임.
- IAM의 개념을 이해하고 Terraform으로 구현하면, 더욱 안전하고 효율적인 클라우드 인프라를 구축 가능.
